
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kalman filtering and optimal estimation library">
      
      
        <meta name="author" content="Roger Labbe">
      
      
        <link rel="canonical" href="https://georgepearse.github.io/bayesian_filters/api/kalman/">
      
      
        <link rel="prev" href="../../algorithms/monte-carlo/">
      
      
        <link rel="next" href="../common/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Kalman - Bayesian Filters</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kalman-filter-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Bayesian Filters" class="md-header__button md-logo" aria-label="Bayesian Filters" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bayesian Filters
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kalman
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/GeorgePearse/bayesian_filters" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GeorgePearse/bayesian_filters
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/installation/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../filters/kalman-filter/" class="md-tabs__link">
          
  
  
  Filters

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../algorithms/gh-filter/" class="md-tabs__link">
          
  
  
  Other Algorithms

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/" class="md-tabs__link">
        
  
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Bayesian Filters" class="md-nav__button md-logo" aria-label="Bayesian Filters" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Bayesian Filters
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/GeorgePearse/bayesian_filters" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GeorgePearse/bayesian_filters
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Filters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Filters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/kalman-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kalman Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/extended-kalman-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extended Kalman Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/unscented-kalman-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unscented Kalman Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/ensemble-kalman-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ensemble Kalman Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/information-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Information Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/square-root-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Square Root Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/fading-kalman-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fading Kalman Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/h-infinity-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    H-Infinity Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/imm-estimator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IMM Estimator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filters/mmae-filter-bank/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MMAE Filter Bank
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Other Algorithms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Other Algorithms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/gh-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GH Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/discrete-bayes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Discrete Bayes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/least-squares/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Least Squares
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/monte-carlo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monte Carlo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Kalman
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Kalman
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kalmanfilter" class="md-nav__link">
    <span class="md-ellipsis">
      KalmanFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter" class="md-nav__link">
    <span class="md-ellipsis">
      KalmanFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KalmanFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.alpha" class="md-nav__link">
    <span class="md-ellipsis">
      alpha
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.log_likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      log_likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.mahalanobis" class="md-nav__link">
    <span class="md-ellipsis">
      mahalanobis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.batch_filter" class="md-nav__link">
    <span class="md-ellipsis">
      batch_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.get_prediction" class="md-nav__link">
    <span class="md-ellipsis">
      get_prediction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.get_update" class="md-nav__link">
    <span class="md-ellipsis">
      get_update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.log_likelihood_of" class="md-nav__link">
    <span class="md-ellipsis">
      log_likelihood_of
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.measurement_of_state" class="md-nav__link">
    <span class="md-ellipsis">
      measurement_of_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.predict_steadystate" class="md-nav__link">
    <span class="md-ellipsis">
      predict_steadystate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.residual_of" class="md-nav__link">
    <span class="md-ellipsis">
      residual_of
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.rts_smoother" class="md-nav__link">
    <span class="md-ellipsis">
      rts_smoother
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.test_matrix_dimensions" class="md-nav__link">
    <span class="md-ellipsis">
      test_matrix_dimensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.update_correlated" class="md-nav__link">
    <span class="md-ellipsis">
      update_correlated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.update_sequential" class="md-nav__link">
    <span class="md-ellipsis">
      update_sequential
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.update_steadystate" class="md-nav__link">
    <span class="md-ellipsis">
      update_steadystate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extendedkalmanfilter" class="md-nav__link">
    <span class="md-ellipsis">
      ExtendedKalmanFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter" class="md-nav__link">
    <span class="md-ellipsis">
      ExtendedKalmanFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExtendedKalmanFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.log_likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      log_likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.mahalanobis" class="md-nav__link">
    <span class="md-ellipsis">
      mahalanobis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict_update" class="md-nav__link">
    <span class="md-ellipsis">
      predict_update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict_x" class="md-nav__link">
    <span class="md-ellipsis">
      predict_x
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unscentedkalmanfilter" class="md-nav__link">
    <span class="md-ellipsis">
      UnscentedKalmanFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter" class="md-nav__link">
    <span class="md-ellipsis">
      UnscentedKalmanFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnscentedKalmanFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.log_likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      log_likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.mahalanobis" class="md-nav__link">
    <span class="md-ellipsis">
      mahalanobis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.batch_filter" class="md-nav__link">
    <span class="md-ellipsis">
      batch_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.compute_process_sigmas" class="md-nav__link">
    <span class="md-ellipsis">
      compute_process_sigmas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.cross_variance" class="md-nav__link">
    <span class="md-ellipsis">
      cross_variance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.rts_smoother" class="md-nav__link">
    <span class="md-ellipsis">
      rts_smoother
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ensemblekalmanfilter" class="md-nav__link">
    <span class="md-ellipsis">
      EnsembleKalmanFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.EnsembleKalmanFilter" class="md-nav__link">
    <span class="md-ellipsis">
      EnsembleKalmanFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EnsembleKalmanFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.EnsembleKalmanFilter.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.EnsembleKalmanFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.EnsembleKalmanFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#informationfilter" class="md-nav__link">
    <span class="md-ellipsis">
      InformationFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter" class="md-nav__link">
    <span class="md-ellipsis">
      InformationFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InformationFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.F" class="md-nav__link">
    <span class="md-ellipsis">
      F
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.P" class="md-nav__link">
    <span class="md-ellipsis">
      P
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.batch_filter" class="md-nav__link">
    <span class="md-ellipsis">
      batch_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#immestimator" class="md-nav__link">
    <span class="md-ellipsis">
      IMMEstimator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.IMMEstimator" class="md-nav__link">
    <span class="md-ellipsis">
      IMMEstimator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IMMEstimator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.IMMEstimator.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.IMMEstimator.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mmaefilterbank" class="md-nav__link">
    <span class="md-ellipsis">
      MMAEFilterBank
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.MMAEFilterBank" class="md-nav__link">
    <span class="md-ellipsis">
      MMAEFilterBank
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MMAEFilterBank">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.MMAEFilterBank.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.MMAEFilterBank.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Common
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GH
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discrete-bayes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Discrete Bayes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../leastsq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Least Squares
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monte-carlo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monte Carlo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kalmanfilter" class="md-nav__link">
    <span class="md-ellipsis">
      KalmanFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter" class="md-nav__link">
    <span class="md-ellipsis">
      KalmanFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KalmanFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.alpha" class="md-nav__link">
    <span class="md-ellipsis">
      alpha
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.log_likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      log_likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.mahalanobis" class="md-nav__link">
    <span class="md-ellipsis">
      mahalanobis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.batch_filter" class="md-nav__link">
    <span class="md-ellipsis">
      batch_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.get_prediction" class="md-nav__link">
    <span class="md-ellipsis">
      get_prediction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.get_update" class="md-nav__link">
    <span class="md-ellipsis">
      get_update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.log_likelihood_of" class="md-nav__link">
    <span class="md-ellipsis">
      log_likelihood_of
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.measurement_of_state" class="md-nav__link">
    <span class="md-ellipsis">
      measurement_of_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.predict_steadystate" class="md-nav__link">
    <span class="md-ellipsis">
      predict_steadystate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.residual_of" class="md-nav__link">
    <span class="md-ellipsis">
      residual_of
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.rts_smoother" class="md-nav__link">
    <span class="md-ellipsis">
      rts_smoother
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.test_matrix_dimensions" class="md-nav__link">
    <span class="md-ellipsis">
      test_matrix_dimensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.update_correlated" class="md-nav__link">
    <span class="md-ellipsis">
      update_correlated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.update_sequential" class="md-nav__link">
    <span class="md-ellipsis">
      update_sequential
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.KalmanFilter.update_steadystate" class="md-nav__link">
    <span class="md-ellipsis">
      update_steadystate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extendedkalmanfilter" class="md-nav__link">
    <span class="md-ellipsis">
      ExtendedKalmanFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter" class="md-nav__link">
    <span class="md-ellipsis">
      ExtendedKalmanFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExtendedKalmanFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.log_likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      log_likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.mahalanobis" class="md-nav__link">
    <span class="md-ellipsis">
      mahalanobis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict_update" class="md-nav__link">
    <span class="md-ellipsis">
      predict_update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict_x" class="md-nav__link">
    <span class="md-ellipsis">
      predict_x
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.ExtendedKalmanFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unscentedkalmanfilter" class="md-nav__link">
    <span class="md-ellipsis">
      UnscentedKalmanFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter" class="md-nav__link">
    <span class="md-ellipsis">
      UnscentedKalmanFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnscentedKalmanFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.log_likelihood" class="md-nav__link">
    <span class="md-ellipsis">
      log_likelihood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.mahalanobis" class="md-nav__link">
    <span class="md-ellipsis">
      mahalanobis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.batch_filter" class="md-nav__link">
    <span class="md-ellipsis">
      batch_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.compute_process_sigmas" class="md-nav__link">
    <span class="md-ellipsis">
      compute_process_sigmas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.cross_variance" class="md-nav__link">
    <span class="md-ellipsis">
      cross_variance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.rts_smoother" class="md-nav__link">
    <span class="md-ellipsis">
      rts_smoother
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.UnscentedKalmanFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ensemblekalmanfilter" class="md-nav__link">
    <span class="md-ellipsis">
      EnsembleKalmanFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.EnsembleKalmanFilter" class="md-nav__link">
    <span class="md-ellipsis">
      EnsembleKalmanFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EnsembleKalmanFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.EnsembleKalmanFilter.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.EnsembleKalmanFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.EnsembleKalmanFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#informationfilter" class="md-nav__link">
    <span class="md-ellipsis">
      InformationFilter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter" class="md-nav__link">
    <span class="md-ellipsis">
      InformationFilter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InformationFilter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.F" class="md-nav__link">
    <span class="md-ellipsis">
      F
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.P" class="md-nav__link">
    <span class="md-ellipsis">
      P
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.batch_filter" class="md-nav__link">
    <span class="md-ellipsis">
      batch_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.InformationFilter.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#immestimator" class="md-nav__link">
    <span class="md-ellipsis">
      IMMEstimator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.IMMEstimator" class="md-nav__link">
    <span class="md-ellipsis">
      IMMEstimator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IMMEstimator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.IMMEstimator.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.IMMEstimator.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mmaefilterbank" class="md-nav__link">
    <span class="md-ellipsis">
      MMAEFilterBank
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.MMAEFilterBank" class="md-nav__link">
    <span class="md-ellipsis">
      MMAEFilterBank
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MMAEFilterBank">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.MMAEFilterBank.predict" class="md-nav__link">
    <span class="md-ellipsis">
      predict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bayesian_filters.kalman.MMAEFilterBank.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="kalman-filter-module">Kalman Filter Module<a class="headerlink" href="#kalman-filter-module" title="Permanent link">&para;</a></h1>
<p>The kalman module contains various Kalman filter implementations.</p>
<h2 id="kalmanfilter">KalmanFilter<a class="headerlink" href="#kalmanfilter" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="bayesian_filters.kalman.KalmanFilter" class="doc doc-heading">
            <code>KalmanFilter</code>


<a href="#bayesian_filters.kalman.KalmanFilter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>Implements a Kalman filter. You are responsible for setting the
various state variables to reasonable values; the defaults  will
not give you a functional filter.</p>
<p>For now the best documentation is my free book Kalman and Bayesian
Filters in Python [2]_. The test files in this directory also give you a
basic idea of use, albeit without much description.</p>
<p>In brief, you will first construct this object, specifying the size of
the state vector with dim_x and the size of the measurement vector that
you will be using with dim_z. These are mostly used to perform size checks
when you assign values to the various matrices. For example, if you
specified dim_z=2 and then try to assign a 3x3 matrix to R (the
measurement noise matrix you will get an assert exception because R
should be 2x2. (If for whatever reason you need to alter the size of
things midstream just use the underscore version of the matrices to
assign directly: your_filter._R = a_3x3_matrix.)</p>
<p>After construction the filter will have default matrices created for you,
but you must specify the values for each. Its usually easiest to just
overwrite them rather than assign to each element yourself. This will be
clearer in the example below. All are of type numpy.array.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Here is a filter that tracks position and velocity using a sensor that only
reads position.</p>
<p>First construct the object with the required dimensionality. Here the state
(<code>dim_x</code>) has 2 coefficients (position and velocity), and the measurement
(<code>dim_z</code>) has one. In FilterPy <code>x</code> is the state, <code>z</code> is the measurement.</p>
<p>.. code::</p>
<div class="highlight"><pre><span></span><code>from bayesian_filters.kalman import KalmanFilter
f = KalmanFilter (dim_x=2, dim_z=1)
</code></pre></div>
<p>Assign the initial value for the state (position and velocity). You can do this
with a two dimensional array like so:</p>
<div class="highlight"><pre><span></span><code>.. code::

    f.x = np.array([[2.],    # position
                    [0.]])   # velocity
</code></pre></div>
<p>or just use a one dimensional array, which I prefer doing.</p>
<p>.. code::</p>
<div class="highlight"><pre><span></span><code>f.x = np.array([2., 0.])
</code></pre></div>
<p>Define the state transition matrix:</p>
<div class="highlight"><pre><span></span><code>.. code::

    f.F = np.array([[1.,1.],
                    [0.,1.]])
</code></pre></div>
<p>Define the measurement function. Here we need to convert a position-velocity
vector into just a position vector, so we use:</p>
<div class="highlight"><pre><span></span><code>.. code::

f.H = np.array([[1., 0.]])
</code></pre></div>
<p>Define the state's covariance matrix P.</p>
<p>.. code::</p>
<div class="highlight"><pre><span></span><code>f.P = np.array([[1000.,    0.],
                [   0., 1000.] ])
</code></pre></div>
<p>Now assign the measurement noise. Here the dimension is 1x1, so I can
use a scalar</p>
<p>.. code::</p>
<div class="highlight"><pre><span></span><code>f.R = 5
</code></pre></div>
<p>I could have done this instead:</p>
<p>.. code::</p>
<div class="highlight"><pre><span></span><code>f.R = np.array([[5.]])
</code></pre></div>
<p>Note that this must be a 2 dimensional array.</p>
<p>Finally, I will assign the process noise. Here I will take advantage of
another FilterPy library function:</p>
<p>.. code::</p>
<div class="highlight"><pre><span></span><code>from bayesian_filters.common import Q_discrete_white_noise
f.Q = Q_discrete_white_noise(dim=2, dt=0.1, var=0.13)
</code></pre></div>
<p>Now just perform the standard predict/update loop:</p>
<p>.. code::</p>
<div class="highlight"><pre><span></span><code>while some_condition_is_true:
    z = get_sensor_reading()
    f.predict()
    f.update(z)

    do_something_with_estimate (f.x)
</code></pre></div>
<p><strong>Procedural Form</strong></p>
<p>This module also contains stand alone functions to perform Kalman filtering.
Use these if you are not a fan of objects.</p>
<p><strong>Example</strong></p>
<p>.. code::</p>
<div class="highlight"><pre><span></span><code>while True:
    z, R = read_sensor()
    x, P = predict(x, P, F, Q)
    x, P = update(x, P, z, R, H)
</code></pre></div>
<p>See my book Kalman and Bayesian Filters in Python [2]_.</p>
<p>You will have to set the following attributes after constructing this
object for the filter to perform properly. Please note that there are
various checks in place to ensure that you have made everything the
'correct' size. However, it is possible to provide incorrectly sized
arrays such that the linear algebra can not perform an operation.
It can also fail silently - you can end up with matrices of a size that
allows the linear algebra to work, but are the wrong shape for the problem
you are trying to solve.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dim_x</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of state variables for the Kalman filter. For example, if
you are tracking the position and velocity of an object in two
dimensions, dim_x would be 4.
This is used to set the default size of P, Q, and u</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim_z</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of of measurement inputs. For example, if the sensor
provides you with position in (x,y), dim_z would be 2.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim_u</code>
            </td>
            <td>
                  <code><span title="int">int</span>(<span title="optional">optional</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>size of the control input, if it is being used.
Default value of 0 indicates it is not used.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.x">x</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current state estimate. Any call to update() or predict() updates
this variable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.P">P</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current state covariance matrix. Any call to update() or predict()
updates this variable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.x_prior">x_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state estimate. The <em>_prior and </em>_post attributes
are for convenience; they store the  prior and posterior of the
current epoch. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.P_prior">P_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.x_post">x_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state estimate. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.P_post">P_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.z">z</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last measurement used in update(). Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.R">R</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_z">dim_z</span>, <span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement noise covariance matrix. Also known as the
observation covariance.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.Q">Q</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Process noise covariance matrix. Also known as the transition
covariance.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.F">F</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>()</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State Transition matrix. Also known as <code>A</code> in some formulation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.H">H</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_z">dim_z</span>, <span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement function. Also known as the observation matrix, or as <code>C</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.y">y</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Residual of the update step. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.K">K</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.kalman_filter.KalmanFilter.dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Kalman gain of the update step. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.S">S</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>System uncertainty (P projected to measurement space). Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.SI">SI</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Inverse system uncertainty. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="log_likelihood

  
      property
   (bayesian_filters.kalman.KalmanFilter.log_likelihood)" href="#bayesian_filters.kalman.KalmanFilter.log_likelihood">log_likelihood</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>log-likelihood of the last measurement. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="likelihood

  
      property
   (bayesian_filters.kalman.KalmanFilter.likelihood)" href="#bayesian_filters.kalman.KalmanFilter.likelihood">likelihood</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>likelihood of last measurement. Read only.</p>
<p>Computed from the log-likelihood. The log-likelihood can be very
small,  meaning a large negative value such as -28000. Taking the
exp() of that results in 0.0, which can break typical algorithms
which multiply by this value, so by default we always return a
number &gt;= sys.float_info.min.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="mahalanobis

  
      property
   (bayesian_filters.kalman.KalmanFilter.mahalanobis)" href="#bayesian_filters.kalman.KalmanFilter.mahalanobis">mahalanobis</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>mahalanobis distance of the innovation. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.KalmanFilter.inv">inv</span></code></td>
            <td>
                  <code>function, default numpy.linalg.inv</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If you prefer another inverse function, such as the Moore-Penrose
pseudo inverse, set it to that instead: kf.inv = np.linalg.pinv</p>
<p>This is only used to invert self.S. If you know it is diagonal, you
might choose to set it to filterpy.common.inv_diagonal, which is
several times faster than numpy.linalg.inv for diagonal matrices.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="alpha

  
      property
      writable
   (bayesian_filters.kalman.KalmanFilter.alpha)" href="#bayesian_filters.kalman.KalmanFilter.alpha">alpha</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fading memory setting. 1.0 gives the normal Kalman filter, and
values slightly larger than 1.0 (such as 1.02) give a fading
memory effect - previous measurements have less influence on the
filter's estimates. This formulation of the Fading memory filter
(there are many) is due to Dan Simon [1]_.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="references" open>
  <summary>References</summary>
  <p>.. [1] Dan Simon. "Optimal State Estimation." John Wiley &amp; Sons.
   p. 208-212. (2006)</p>
<p>.. [2] Roger Labbe. "Kalman and Bayesian Filters in Python"
   https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python</p>
</details>










  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.KalmanFilter.alpha" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">alpha</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

<a href="#bayesian_filters.kalman.KalmanFilter.alpha" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Fading memory setting. 1.0 gives the normal Kalman filter, and
values slightly larger than 1.0 (such as 1.02) give a fading
memory effect - previous measurements have less influence on the
filter's estimates. This formulation of the Fading memory filter
(there are many) is due to Dan Simon [1]_.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.KalmanFilter.likelihood" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">likelihood</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.KalmanFilter.likelihood" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Computed from the log-likelihood. The log-likelihood can be very
small,  meaning a large negative value such as -28000. Taking the
exp() of that results in 0.0, which can break typical algorithms
which multiply by this value, so by default we always return a
number &gt;= sys.float_info.min.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.KalmanFilter.log_likelihood" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_likelihood</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.KalmanFilter.log_likelihood" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>log-likelihood of the last measurement.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.KalmanFilter.mahalanobis" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mahalanobis</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.KalmanFilter.mahalanobis" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>"
Mahalanobis distance of measurement. E.g. 3 means measurement
was 3 standard deviations away from the predicted value.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>mahalanobis</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.batch_filter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">batch_filter</span><span class="p">(</span><span class="n">zs</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Qs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Hs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Rs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Bs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">us</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">update_first</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saver</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.batch_filter" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Batch processes a sequences of measurements.</p>


<details class="-parameters" open>
  <summary>Parameters</summary>
  <p>zs : list-like
     list of measurements at each time step <code>self.dt</code>. Missing
     measurements must be represented by <code>None</code>.</p>
<p>Fs : None, list-like, default=None
     optional value or list of values to use for the state transition
     matrix F.</p>
<div class="highlight"><pre><span></span><code> If Fs is None then self.F is used for all epochs.

 Otherwise it must contain a list-like list of F&#39;s, one for
 each epoch.  This allows you to have varying F per epoch.
</code></pre></div>
<p>Qs : None, np.array or list-like, default=None
     optional value or list of values to use for the process error
     covariance Q.</p>
<div class="highlight"><pre><span></span><code> If Qs is None then self.Q is used for all epochs.

 Otherwise it must contain a list-like list of Q&#39;s, one for
 each epoch.  This allows you to have varying Q per epoch.
</code></pre></div>
<p>Hs : None, np.array or list-like, default=None
     optional list of values to use for the measurement matrix H.</p>
<div class="highlight"><pre><span></span><code> If Hs is None then self.H is used for all epochs.

 If Hs contains a single matrix, then it is used as H for all
 epochs.

 Otherwise it must contain a list-like list of H&#39;s, one for
 each epoch.  This allows you to have varying H per epoch.
</code></pre></div>
<p>Rs : None, np.array or list-like, default=None
     optional list of values to use for the measurement error
     covariance R.</p>
<div class="highlight"><pre><span></span><code> If Rs is None then self.R is used for all epochs.

 Otherwise it must contain a list-like list of R&#39;s, one for
 each epoch.  This allows you to have varying R per epoch.
</code></pre></div>
<p>Bs : None, np.array or list-like, default=None
     optional list of values to use for the control transition matrix B.</p>
<div class="highlight"><pre><span></span><code> If Bs is None then self.B is used for all epochs.

 Otherwise it must contain a list-like list of B&#39;s, one for
 each epoch.  This allows you to have varying B per epoch.
</code></pre></div>
<p>us : None, np.array or list-like, default=None
     optional list of values to use for the control input vector;</p>
<div class="highlight"><pre><span></span><code> If us is None then None is used for all epochs (equivalent to 0,
 or no control input).

 Otherwise it must contain a list-like list of u&#39;s, one for
 each epoch.
</code></pre></div>
<p>update_first : bool, optional, default=False
     controls whether the order of operations is update followed by
     predict, or predict followed by update. Default is predict-&gt;update.</p>
<p>saver : filterpy.common.Saver, optional
     filterpy.common.Saver object. If provided, saver.save() will be
     called after every epoch</p>
</details>

<details class="-returns" open>
  <summary>Returns</summary>
  <p>means : np.array((n,dim_x,1))
     array of the state for each time step after the update. Each entry
     is an np.array. In other words <code>means[k,:]</code> is the state at step
     <code>k</code>.</p>
<p>covariance : np.array((n,dim_x,dim_x))
     array of the covariances for each time step after the update.
     In other words <code>covariance[k,:,:]</code> is the covariance at step <code>k</code>.</p>
<p>means_predictions : np.array((n,dim_x,1))
     array of the state for each time step after the predictions. Each
     entry is an np.array. In other words <code>means[k,:]</code> is the state at
     step <code>k</code>.</p>
<p>covariance_predictions : np.array((n,dim_x,dim_x))
     array of the covariances for each time step after the prediction.
     In other words <code>covariance[k,:,:]</code> is the covariance at step <code>k</code>.</p>
</details>

<details class="-examples" open>
  <summary>Examples</summary>
  <p>.. code-block:: Python</p>
<div class="highlight"><pre><span></span><code> # this example demonstrates tracking a measurement where the time
 # between measurement varies, as stored in dts. This requires
 # that F be recomputed for each epoch. The output is then smoothed
 # with an RTS smoother.

 zs = [t + random.randn()*4 for t in range (40)]
 Fs = [np.array([[1., dt], [0, 1]] for dt in dts]

 (mu, cov, _, _) = kf.batch_filter(zs, Fs=Fs)
 (xs, Ps, Ks, Pps) = kf.rts_smoother(mu, cov, Fs=Fs)
</code></pre></div>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.get_prediction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_prediction</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Q</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.get_prediction" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predict next state (prior) using the Kalman filter state propagation
equations and returns it without modifying the object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>u</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control vector.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>B</code>
            </td>
            <td>
                  <code>np.array(dim_x, dim_u), or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control transition matrix; a value of None
will cause the filter to use <code>self.B</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>F</code>
            </td>
            <td>
                  <code>np.array(dim_x, dim_x), or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional state transition matrix; a value of None
will cause the filter to use <code>self.F</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Q</code>
            </td>
            <td>
                  <code>np.array(dim_x, dim_x), scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional process noise matrix; a value of None will cause the
filter to use <code>self.Q</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>(x, P) : tuple</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State vector and covariance array of the prediction.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.get_update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_update</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.get_update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Computes the new estimate based on measurement <code>z</code> and returns it
without altering the state of the filter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code>(dim_z, 1): array_like</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update. z can be a scalar if dim_z is 1,
otherwise it must be convertible to a column vector.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>(x, P) : tuple</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State vector and covariance array of the update.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.log_likelihood_of" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_likelihood_of</span><span class="p">(</span><span class="n">z</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.log_likelihood_of" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>log likelihood of the measurement <code>z</code>. This should only be called
after a call to update(). Calling after predict() will yield an
incorrect result.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.measurement_of_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">measurement_of_state</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.measurement_of_state" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Helper function that converts a state into a measurement.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>x</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>kalman state vector</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>z</code></td>            <td>
                  <code>(dim_z, 1): array_like</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update. z can be a scalar if dim_z is 1,
otherwise it must be convertible to a column vector.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.predict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Q</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.predict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predict next state (prior) using the Kalman filter state propagation
equations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>u</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control vector.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>B</code>
            </td>
            <td>
                  <code>np.array(dim_x, dim_u), or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control transition matrix; a value of None
will cause the filter to use <code>self.B</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>F</code>
            </td>
            <td>
                  <code>np.array(dim_x, dim_x), or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional state transition matrix; a value of None
will cause the filter to use <code>self.F</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Q</code>
            </td>
            <td>
                  <code>np.array(dim_x, dim_x), scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional process noise matrix; a value of None will cause the
filter to use <code>self.Q</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.predict_steadystate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict_steadystate</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.predict_steadystate" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predict state (prior) using the Kalman filter state propagation
equations. Only x is updated, P is left unchanged. See
update_steadstate() for a longer explanation of when to use this
method.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>u</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control vector. If non-zero, it is multiplied by B
to create the control input into the system.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>B</code>
            </td>
            <td>
                  <code>np.array(dim_x, dim_u), or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control transition matrix; a value of None
will cause the filter to use <code>self.B</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.residual_of" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">residual_of</span><span class="p">(</span><span class="n">z</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.residual_of" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the residual for the given measurement (z). Does not alter
the state of the filter.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.rts_smoother" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rts_smoother</span><span class="p">(</span><span class="n">Xs</span><span class="p">,</span> <span class="n">Ps</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Qs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inv</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.rts_smoother" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Runs the Rauch-Tung-Striebel Kalman smoother on a set of
means and covariances computed by a Kalman filter. The usual input
would come from the output of <code>KalmanFilter.batch_filter()</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>Xs</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of the means (state variable x) of the output of a Kalman
filter.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Ps</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of the covariances of the output of a kalman filter.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Fs</code>
            </td>
            <td>
                  <code>list-like collection of numpy.array</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State transition matrix of the Kalman filter at each time step.
Optional, if not provided the filter's self.F will be used</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Qs</code>
            </td>
            <td>
                  <code>list-like collection of numpy.array</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Process noise of the Kalman filter at each time step. Optional,
if not provided the filter's self.Q will be used</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>inv</code>
            </td>
            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If you prefer another inverse function, such as the Moore-Penrose
pseudo inverse, set it to that instead: kf.inv = np.linalg.pinv</p>
              </div>
            </td>
            <td>
                  <code>numpy.linalg.inv</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>x</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>smoothed means</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>P</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>smoothed state covariances</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>K</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>smoother gain at each step</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>Pp</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Predicted state covariances</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>.. code-block:: Python</p>
<div class="highlight"><pre><span></span><code>zs = [t + random.randn()*4 for t in range (40)]

(mu, cov, _, _) = kalman.batch_filter(zs)
(x, P, K, Pp) = rts_smoother(mu, cov, kf.F, kf.Q)
</code></pre></div>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.test_matrix_dimensions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_matrix_dimensions</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">H</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Q</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.test_matrix_dimensions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Performs a series of asserts to check that the size of everything
is what it should be. This can help you debug problems in your design.</p>
<p>If you pass in H, R, F, Q those will be used instead of this object's
value for those matrices.</p>
<p>Testing <code>z</code> (the measurement) is problamatic. x is a vector, and can be
implemented as either a 1D array or as a nx1 column vector. Thus Hx
can be of different shapes. Then, if Hx is a single value, it can
be either a 1D array or 2D vector. If either is true, z can reasonably
be a scalar (either '3' or np.array('3') are scalars under this
definition), a 1D, 1 element array, or a 2D, 1 element array. You are
allowed to pass in any combination that works.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">H</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a new measurement (z) to the Kalman filter.</p>
<p>If z is None, nothing is computed. However, x_post and P_post are
updated with the prior (x_prior, P_prior), and self.z is set to None.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code>(dim_z, 1): array_like</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update. z can be a scalar if dim_z is 1,
otherwise it must be convertible to a column vector.</p>
<p>If you pass in a value of H, z must be a column vector the
of the correct size.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>R</code>
            </td>
            <td>
                  <code>np.array, scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide R to override the measurement noise for this
one call, otherwise  self.R will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>H</code>
            </td>
            <td>
                  <code>np.array, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide H to override the measurement function for this
one call, otherwise self.H will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.update_correlated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_correlated</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">H</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.update_correlated" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a new measurement (z) to the Kalman filter assuming that
process noise and measurement noise are correlated as defined in
the <code>self.M</code> matrix.</p>
<p>A partial derivation can be found in [1]</p>
<p>If z is None, nothing is changed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code>(dim_z, 1): array_like</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update. z can be a scalar if dim_z is 1,
otherwise it must be convertible to a column vector.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>R</code>
            </td>
            <td>
                  <code>np.array, scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide R to override the measurement noise for this
one call, otherwise  self.R will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>H</code>
            </td>
            <td>
                  <code>np.array,  or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide H to override the measurement function for this
one call, otherwise  self.H will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="references" open>
  <summary>References</summary>
  <p>.. [1] Bulut, Y. (2011). Applied Kalman filter theory (Doctoral dissertation, Northeastern University).
       http://people.duke.edu/~hpgavin/SystemID/References/Balut-KalmanFilter-PhD-NEU-2011.pdf</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.update_sequential" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_sequential</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">z_i</span><span class="p">,</span> <span class="n">R_i</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">H_i</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.update_sequential" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a single input measurement (z_i) to the Kalman filter.
In sequential processing, inputs are processed one at a time.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>start</code>
            </td>
            <td>
                  <code><span title="integer">integer</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the first measurement input updated by this call.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>z_i</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span> or <span title="scalar">scalar</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement of inputs for this partial update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>R_i</code>
            </td>
            <td>
                  <code>np.array, scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide R_i to override the measurement noise of
inputs for this one call, otherwise a slice of self.R will
be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>H_i</code>
            </td>
            <td>
                  <code>np.array, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide H[i] to override the partial measurement
function for this one call, otherwise a slice of self.H will
be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.KalmanFilter.update_steadystate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_steadystate</span><span class="p">(</span><span class="n">z</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.KalmanFilter.update_steadystate" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a new measurement (z) to the Kalman filter without recomputing
the Kalman gain K, the state covariance P, or the system
uncertainty S.</p>
<p>You can use this for LTI systems since the Kalman gain and covariance
converge to a fixed value. Precompute these and assign them explicitly,
or run the Kalman filter using the normal predict()/update(0 cycle
until they converge.</p>
<p>The main advantage of this call is speed. We do significantly less
computation, notably avoiding a costly matrix inversion.</p>
<p>Use in conjunction with predict_steadystate(), otherwise P will grow
without bound.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code>(dim_z, 1): array_like</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update. z can be a scalar if dim_z is 1,
otherwise it must be convertible to a column vector.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">cv</span> <span class="o">=</span> <span class="n">kinematic_kf</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># 3D const velocity filter</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># let filter converge on representative data, then save k and P</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">cv</span><span class="o">.</span><span class="n">predict</span><span class="p">()</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">cv</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">saved_k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cv</span><span class="o">.</span><span class="n">K</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">saved_P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cv</span><span class="o">.</span><span class="n">P</span><span class="p">)</span>
</code></pre></div>
    <p>later on:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">cv</span> <span class="o">=</span> <span class="n">kinematic_kf</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># 3D const velocity filter</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">cv</span><span class="o">.</span><span class="n">K</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">saved_K</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">cv</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">saved_P</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">cv</span><span class="o">.</span><span class="n">predict_steadystate</span><span class="p">()</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">cv</span><span class="o">.</span><span class="n">update_steadystate</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
</code></pre></div>


    </div>

</div>



  </div>

    </div>

</div><h2 id="extendedkalmanfilter">ExtendedKalmanFilter<a class="headerlink" href="#extendedkalmanfilter" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="bayesian_filters.kalman.ExtendedKalmanFilter" class="doc doc-heading">
            <code>ExtendedKalmanFilter</code>


<a href="#bayesian_filters.kalman.ExtendedKalmanFilter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>Implements an extended Kalman filter (EKF). You are responsible for
setting the various state variables to reasonable values; the defaults
will  not give you a functional filter.</p>
<p>You will have to set the following attributes after constructing this
object for the filter to perform properly. Please note that there are
various checks in place to ensure that you have made everything the
'correct' size. However, it is possible to provide incorrectly sized
arrays such that the linear algebra can not perform an operation.
It can also fail silently - you can end up with matrices of a size that
allows the linear algebra to work, but are the wrong shape for the problem
you are trying to solve.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dim_x</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of state variables for the Kalman filter. For example, if
you are tracking the position and velocity of an object in two
dimensions, dim_x would be 4.</p>
<p>This is used to set the default size of P, Q, and u</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim_z</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of measurement inputs. For example, if the sensor
provides you with position in (x,y), dim_z would be 2.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.x">x</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State estimate vector</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.P">P</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Covariance matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.x_prior">x_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state estimate. The <em>_prior and </em>_post attributes
are for convienence; they store the  prior and posterior of the
current epoch. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.P_prior">P_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.x_post">x_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state estimate. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.P_post">P_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.R">R</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_z">dim_z</span>, <span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement noise matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.Q">Q</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Process noise matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.F">F</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>()</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State Transition matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.H">H</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement function</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.y">y</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Residual of the update step. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.K">K</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Kalman gain of the update step. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.S">S</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Systen uncertaintly projected to measurement space. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.ExtendedKalmanFilter.z">z</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last measurement used in update(). Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="log_likelihood

  
      property
   (bayesian_filters.kalman.ExtendedKalmanFilter.log_likelihood)" href="#bayesian_filters.kalman.ExtendedKalmanFilter.log_likelihood">log_likelihood</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>log-likelihood of the last measurement. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="likelihood

  
      property
   (bayesian_filters.kalman.ExtendedKalmanFilter.likelihood)" href="#bayesian_filters.kalman.ExtendedKalmanFilter.likelihood">likelihood</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>likelihood of last measurment. Read only.</p>
<p>Computed from the log-likelihood. The log-likelihood can be very
small,  meaning a large negative value such as -28000. Taking the
exp() of that results in 0.0, which can break typical algorithms
which multiply by this value, so by default we always return a
number &gt;= sys.float_info.min.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="mahalanobis

  
      property
   (bayesian_filters.kalman.ExtendedKalmanFilter.mahalanobis)" href="#bayesian_filters.kalman.ExtendedKalmanFilter.mahalanobis">mahalanobis</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>mahalanobis distance of the innovation. E.g. 3 means measurement
was 3 standard deviations away from the predicted value.</p>
<p>Read only.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>See my book Kalman and Bayesian Filters in Python
https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.ExtendedKalmanFilter.likelihood" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">likelihood</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.ExtendedKalmanFilter.likelihood" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Computed from the log-likelihood. The log-likelihood can be very
small,  meaning a large negative value such as -28000. Taking the
exp() of that results in 0.0, which can break typical algorithms
which multiply by this value, so by default we always return a
number &gt;= sys.float_info.min.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.ExtendedKalmanFilter.log_likelihood" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_likelihood</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.ExtendedKalmanFilter.log_likelihood" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>log-likelihood of the last measurement.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.ExtendedKalmanFilter.mahalanobis" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mahalanobis</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.ExtendedKalmanFilter.mahalanobis" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Mahalanobis distance of innovation. E.g. 3 means measurement
was 3 standard deviations away from the predicted value.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>mahalanobis</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.ExtendedKalmanFilter.predict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predict next state (prior) using the Kalman filter state propagation
equations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>u</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control vector. If non-zero, it is multiplied by B
to create the control input into the system.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.ExtendedKalmanFilter.predict_update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict_update</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">HJacobian</span><span class="p">,</span> <span class="n">Hx</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">hx_args</span><span class="o">=</span><span class="p">(),</span> <span class="n">u</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict_update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Performs the predict/update innovation of the extended Kalman
filter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this step.
If <code>None</code>, only predict step is perfomed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>HJacobian</code>
            </td>
            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>function which computes the Jacobian of the H matrix (measurement
function). Takes state variable (self.x) as input, along with the
optional arguments in args, and returns H.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Hx</code>
            </td>
            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>function which takes as input the state variable (self.x) along
with the optional arguments in hx_args, and returns the measurement
that would correspond to that state.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>arguments to be passed into HJacobian after the required state
variable.</p>
              </div>
            </td>
            <td>
                  <code>(,)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hx_args</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>arguments to be passed into Hx after the required state
variable.</p>
              </div>
            </td>
            <td>
                  <code>(,)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>u</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span> or <span title="scalar">scalar</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional control vector input to the filter.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.ExtendedKalmanFilter.predict_x" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict_x</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.ExtendedKalmanFilter.predict_x" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predicts the next state of X. If you need to
compute the next state yourself, override this function. You would
need to do this, for example, if the usual Taylor expansion to
generate F is not providing accurate results for you.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.ExtendedKalmanFilter.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">HJacobian</span><span class="p">,</span> <span class="n">Hx</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">hx_args</span><span class="o">=</span><span class="p">(),</span> <span class="n">residual</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.ExtendedKalmanFilter.update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Performs the update innovation of the extended Kalman filter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this step.
If <code>None</code>, posterior is not computed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>HJacobian</code>
            </td>
            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>function which computes the Jacobian of the H matrix (measurement
function). Takes state variable (self.x) as input, returns H.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Hx</code>
            </td>
            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>function which takes as input the state variable (self.x) along
with the optional arguments in hx_args, and returns the measurement
that would correspond to that state.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>R</code>
            </td>
            <td>
                  <code>np.array, scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide R to override the measurement noise for this
one call, otherwise  self.R will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>arguments to be passed into HJacobian after the required state
variable. for robot localization you might need to pass in
information about the map and time of day, so you might have
<code>args=(map_data, time)</code>, where the signature of HCacobian will
be <code>def HJacobian(x, map, t)</code></p>
              </div>
            </td>
            <td>
                  <code>(,)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hx_args</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>arguments to be passed into Hx function after the required state
variable.</p>
              </div>
            </td>
            <td>
                  <code>(,)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>residual</code>
            </td>
            <td>
                  <code><span title="function">function</span>(<span title="bayesian_filters.kalman.EKF.ExtendedKalmanFilter.z">z</span>, <span title="z2">z2</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional function that computes the residual (difference) between
the two measurement vectors. If you do not provide this, then the
built in minus operator will be used. You will normally want to use
the built in unless your residual computation is nonlinear (for
example, if they are angles)</p>
              </div>
            </td>
            <td>
                  <code><span title="numpy.subtract">subtract</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div><h2 id="unscentedkalmanfilter">UnscentedKalmanFilter<a class="headerlink" href="#unscentedkalmanfilter" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="bayesian_filters.kalman.UnscentedKalmanFilter" class="doc doc-heading">
            <code>UnscentedKalmanFilter</code>


<a href="#bayesian_filters.kalman.UnscentedKalmanFilter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>Implements the Scaled Unscented Kalman filter (UKF) as defined by
Simon Julier in [1], using the formulation provided by Wan and Merle
in [2]. This filter scales the sigma points to avoid strong nonlinearities.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dim_x</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of state variables for the filter. For example, if
you are tracking the position and velocity of an object in two
dimensions, dim_x would be 4.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim_z</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of of measurement inputs. For example, if the sensor
provides you with position in (x,y), dim_z would be 2.</p>
<p>This is for convience, so everything is sized correctly on
creation. If you are using multiple sensors the size of <code>z</code> can
change based on the sensor. Just provide the appropriate hx function</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hx</code>
            </td>
            <td>
                  <code><span title="function">function</span>(<span title="bayesian_filters.kalman.UKF.UnscentedKalmanFilter.x">x</span>, **<span title="hx_args">hx_args</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement function. Converts state vector x into a measurement
vector of shape (dim_z).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fx</code>
            </td>
            <td>
                  <code><span title="function">function</span>(<span title="bayesian_filters.kalman.UKF.UnscentedKalmanFilter.x">x</span>, <span title="dt">dt</span>, **<span title="fx_args">fx_args</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>function that returns the state x transformed by the
state transition function. dt is the time step in seconds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>points</code>
            </td>
            <td>
                  <code>class</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Class which computes the sigma points and weights for a UKF
algorithm. You can vary the UKF implementation by changing this
class. For example, MerweScaledSigmaPoints implements the alpha,
beta, kappa parameterization of Van der Merwe, and
JulierSigmaPoints implements Julier's original kappa
parameterization. See either of those for the required
signature of this class if you want to implement your own.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sqrt_fn</code>
            </td>
            <td>
                  <code><span title="callable">callable</span>(<span title="ndarray">ndarray</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Defines how we compute the square root of a matrix, which has
no unique answer. Cholesky is the default choice due to its
speed. Typically your alternative choice will be
scipy.linalg.sqrtm. Different choices affect how the sigma points
are arranged relative to the eigenvectors of the covariance matrix.
Usually this will not matter to you; if so the default cholesky()
yields maximal performance. As of van der Merwe's dissertation of
2004 [6] this was not a well reseached area so I have no advice
to give you.</p>
<p>If your method returns a triangular matrix it must be upper
triangular. Do not use numpy.linalg.cholesky - for historical
reasons it returns a lower triangular matrix. The SciPy version
does the right thing as far as this class is concerned.</p>
              </div>
            </td>
            <td>
                  <code>None (implies scipy.linalg.cholesky)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>x_mean_fn</code>
            </td>
            <td>
                  <code><span title="callable">callable</span>(<span title="bayesian_filters.kalman.sigma_points">sigma_points</span>, <span title="weights">weights</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function that computes the mean of the provided sigma points
and weights. Use this if your state variable contains nonlinear
values such as angles which cannot be summed.</p>
<p>.. code-block:: Python</p>
<div class="highlight"><pre><span></span><code>def state_mean(sigmas, Wm):
    x = np.zeros(3)
    sum_sin, sum_cos = 0., 0.

    for i in range(len(sigmas)):
        s = sigmas[i]
        x[0] += s[0] * Wm[i]
        x[1] += s[1] * Wm[i]
        sum_sin += sin(s[2])*Wm[i]
        sum_cos += cos(s[2])*Wm[i]
    x[2] = atan2(sum_sin, sum_cos)
    return x
</code></pre></div>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>z_mean_fn</code>
            </td>
            <td>
                  <code><span title="callable">callable</span>(<span title="bayesian_filters.kalman.sigma_points">sigma_points</span>, <span title="weights">weights</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Same as x_mean_fn, except it is called for sigma points which
form the measurements after being passed through hx().</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>residual_x</code>
            </td>
            <td>
                  <code><span title="callable">callable</span>(<span title="bayesian_filters.kalman.UKF.UnscentedKalmanFilter.x">x</span>, <span title="bayesian_filters.kalman.UKF.UnscentedKalmanFilter.y">y</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>residual_z</code>
            </td>
            <td>
                  <code><span title="callable">callable</span>(<span title="bayesian_filters.kalman.UKF.UnscentedKalmanFilter.x">x</span>, <span title="bayesian_filters.kalman.UKF.UnscentedKalmanFilter.y">y</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function that computes the residual (difference) between x and y.
You will have to supply this if your state variable cannot support
subtraction, such as angles (359-1 degreees is 2, not 358). x and y
are state vectors, not scalars. One is for the state variable,
the other is for the measurement state.</p>
<p>.. code-block:: Python</p>
<div class="highlight"><pre><span></span><code>def residual(a, b):
    y = a[0] - b[0]
    if y &gt; np.pi:
        y -= 2*np.pi
    if y &lt; -np.pi:
        y += 2*np.pi
    return y
</code></pre></div>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>state_add</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function that subtracts two state vectors, returning a new
state vector. Used during update to compute <code>x + K@y</code>
You will have to supply this if your state variable does not
suport addition, such as it contains angles.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.x">x</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>state estimate vector</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.P">P</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, <span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>covariance estimate matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.x_prior">x_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state estimate. The <em>_prior and </em>_post attributes
are for convienence; they store the  prior and posterior of the
current epoch. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.P_prior">P_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, <span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.x_post">x_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state estimate. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.P_post">P_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, <span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.z">z</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last measurement used in update(). Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.R">R</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_z">dim_z</span>, <span title="dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement noise matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.Q">Q</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, <span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>process noise matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.K">K</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Kalman gain</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.y">y</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>innovation residual</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="log_likelihood

  
      property
   (bayesian_filters.kalman.UnscentedKalmanFilter.log_likelihood)" href="#bayesian_filters.kalman.UnscentedKalmanFilter.log_likelihood">log_likelihood</a></code></td>
            <td>
                  <code><span title="scalar">scalar</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Log likelihood of last measurement update.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="likelihood

  
      property
   (bayesian_filters.kalman.UnscentedKalmanFilter.likelihood)" href="#bayesian_filters.kalman.UnscentedKalmanFilter.likelihood">likelihood</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>likelihood of last measurment. Read only.</p>
<p>Computed from the log-likelihood. The log-likelihood can be very
small,  meaning a large negative value such as -28000. Taking the
exp() of that results in 0.0, which can break typical algorithms
which multiply by this value, so by default we always return a
number &gt;= sys.float_info.min.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="mahalanobis

  
      property
   (bayesian_filters.kalman.UnscentedKalmanFilter.mahalanobis)" href="#bayesian_filters.kalman.UnscentedKalmanFilter.mahalanobis">mahalanobis</a></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>mahalanobis distance of the measurement. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.UnscentedKalmanFilter.inv">inv</span></code></td>
            <td>
                  <code>function, default numpy.linalg.inv</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If you prefer another inverse function, such as the Moore-Penrose
pseudo inverse, set it to that instead:</p>
<p>.. code-block:: Python</p>
<div class="highlight"><pre><span></span><code>kf.inv = np.linalg.pinv
</code></pre></div>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Simple example of a linear order 1 kinematic filter in 2D. There is no
need to use a UKF for this example, but it is easy to read.</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">fx</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># state transition function - predict next state based</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># on constant velocity model x = vt + x_0</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">F</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dt</span><span class="p">],</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">hx</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span>   <span class="c1"># measurement function - convert state into a measurement</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">&gt;&gt;&gt; </span>   <span class="c1"># where measurements are [x_pos, y_pos]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">&gt;&gt;&gt; </span>   <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">&gt;&gt;&gt;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="mf">0.1</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create sigma points to use in the filter. This is standard for Gaussian processes</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">points</span> <span class="o">=</span> <span class="n">MerweScaledSigmaPoints</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">.1</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">2.</span><span class="p">,</span> <span class="n">kappa</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">&gt;&gt;&gt;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">kf</span> <span class="o">=</span> <span class="n">UnscentedKalmanFilter</span><span class="p">(</span><span class="n">dim_x</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">dim_z</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="n">dt</span><span class="p">,</span> <span class="n">fx</span><span class="o">=</span><span class="n">fx</span><span class="p">,</span> <span class="n">hx</span><span class="o">=</span><span class="n">hx</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="n">points</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">kf</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="c1"># initial state</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">kf</span><span class="o">.</span><span class="n">P</span> <span class="o">*=</span> <span class="mf">0.2</span> <span class="c1"># initial uncertainty</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">z_std</span> <span class="o">=</span> <span class="mf">0.1</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">kf</span><span class="o">.</span><span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="n">z_std</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">z_std</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># 1 standard</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">kf</span><span class="o">.</span><span class="n">Q</span> <span class="o">=</span> <span class="n">Q_discrete_white_noise</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="n">dt</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="mf">0.01</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">block_size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="gp">&gt;&gt;&gt;</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">zs</span> <span class="o">=</span> <span class="p">[[</span><span class="n">i</span><span class="o">+</span><span class="n">randn</span><span class="p">()</span><span class="o">*</span><span class="n">z_std</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="n">randn</span><span class="p">()</span><span class="o">*</span><span class="n">z_std</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)]</span> <span class="c1"># measurements</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">zs</span><span class="p">:</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">kf</span><span class="o">.</span><span class="n">predict</span><span class="p">()</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">kf</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">kf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;log-likelihood&#39;</span><span class="p">,</span> <span class="n">kf</span><span class="o">.</span><span class="n">log_likelihood</span><span class="p">)</span>
</code></pre></div>
    <p>For in depth explanations see my book Kalman and Bayesian Filters in Python
https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python</p>
<p>Also see the filterpy/kalman/tests subdirectory for test code that
may be illuminating.</p>


<details class="references" open>
  <summary>References</summary>
  <p>.. [1] Julier, Simon J. "The scaled unscented transformation,"
    American Control Converence, 2002, pp 4555-4559, vol 6.</p>
<div class="highlight"><pre><span></span><code>Online copy:
https://www.cs.unc.edu/~welch/kalman/media/pdf/ACC02-IEEE1357.PDF
</code></pre></div>
<p>.. [2] E. A. Wan and R. Van der Merwe, The unscented Kalman filter for
    nonlinear estimation, in Proc. Symp. Adaptive Syst. Signal
    Process., Commun. Contr., Lake Louise, AB, Canada, Oct. 2000.</p>
<div class="highlight"><pre><span></span><code>Online Copy:
https://www.seas.harvard.edu/courses/cs281/papers/unscented.pdf
</code></pre></div>
<p>.. [3] S. Julier, J. Uhlmann, and H. Durrant-Whyte. "A new method for
       the nonlinear transformation of means and covariances in filters
       and estimators," IEEE Transactions on Automatic Control, 45(3),
       pp. 477-482 (March 2000).</p>
<p>.. [4] E. A. Wan and R. Van der Merwe, The Unscented Kalman filter for
       Nonlinear Estimation, in Proc. Symp. Adaptive Syst. Signal
       Process., Commun. Contr., Lake Louise, AB, Canada, Oct. 2000.</p>
<div class="highlight"><pre><span></span><code>   https://www.seas.harvard.edu/courses/cs281/papers/unscented.pdf
</code></pre></div>
<p>.. [5] Wan, Merle "The Unscented Kalman Filter," chapter in <em>Kalman
       Filtering and Neural Networks</em>, John Wiley &amp; Sons, Inc., 2001.</p>
<p>.. [6] R. Van der Merwe "Sigma-Point Kalman Filters for Probabilitic
       Inference in Dynamic State-Space Models" (Doctoral dissertation)</p>
</details>










  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.likelihood" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">likelihood</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.likelihood" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Computed from the log-likelihood. The log-likelihood can be very
small,  meaning a large negative value such as -28000. Taking the
exp() of that results in 0.0, which can break typical algorithms
which multiply by this value, so by default we always return a
number &gt;= sys.float_info.min.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.log_likelihood" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_likelihood</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.log_likelihood" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>log-likelihood of the last measurement.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.mahalanobis" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mahalanobis</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.mahalanobis" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>"
Mahalanobis distance of measurement. E.g. 3 means measurement
was 3 standard deviations away from the predicted value.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>mahalanobis</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">dim_x</span><span class="p">,</span> <span class="n">dim_z</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">hx</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">sqrt_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x_mean_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z_mean_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">residual_x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">residual_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">state_add</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a Kalman filter. You are responsible for setting the
various state variables to reasonable values; the defaults below will
not give you a functional filter.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.batch_filter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">batch_filter</span><span class="p">(</span><span class="n">zs</span><span class="p">,</span> <span class="n">Rs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">UT</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">saver</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.batch_filter" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Performs the UKF filter over the list of measurement in <code>zs</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>zs</code>
            </td>
            <td>
                  <code><span title="list">list</span> - <span title="like">like</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of measurements at each time step <code>self._dt</code> Missing
measurements must be represented by 'None'.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Rs</code>
            </td>
            <td>
                  <code>(None, <span title="numpy.array">array</span> or <span title="list">list</span> - <span title="like">like</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional list of values to use for the measurement error
covariance R.</p>
<p>If Rs is None then self.R is used for all epochs.</p>
<p>If it is a list of matrices or a 3D array where
len(Rs) == len(zs), then it is treated as a list of R values, one
per epoch. This allows you to have varying R per epoch.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dts</code>
            </td>
            <td>
                  <code>(None, <span title="scalar">scalar</span> or <span title="list">list</span> - <span title="like">like</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional value or list of delta time to be passed into predict.</p>
<p>If dtss is None then self.dt is used for all epochs.</p>
<p>If it is a list where len(dts) == len(zs), then it is treated as a
list of dt values, one per epoch. This allows you to have varying
epoch durations.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>UT</code>
            </td>
            <td>
                  <code><span title="function">function</span>(<span title="sigmas">sigmas</span>, <span title="Wm">Wm</span>, <span title="Wc">Wc</span>, <span title="noise_cov">noise_cov</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional function to compute the unscented transform for the sigma
points passed through hx. Typically the default function will
work - you can use x_mean_fn and z_mean_fn to alter the behavior
of the unscented transform.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>saver</code>
            </td>
            <td>
                  <code><span title="filterpy.common.Saver">Saver</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>filterpy.common.Saver object. If provided, saver.save() will be
called after every epoch</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>means</code></td>            <td>
                  <code><span title="ndarray">ndarray</span>((<span title="n">n</span>, <span title="dim_x">dim_x</span>, 1))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of the state for each time step after the update. Each entry
is an np.array. In other words <code>means[k,:]</code> is the state at step
<code>k</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>covariance</code></td>            <td>
                  <code><span title="ndarray">ndarray</span>((<span title="n">n</span>, <span title="dim_x">dim_x</span>, <span title="dim_x">dim_x</span>))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of the covariances for each time step after the update.
In other words <code>covariance[k,:,:]</code> is the covariance at step <code>k</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>.. code-block:: Python</p>
<div class="highlight"><pre><span></span><code># this example demonstrates tracking a measurement where the time
# between measurement varies, as stored in dts The output is then smoothed
# with an RTS smoother.

zs = [t + random.randn()*4 for t in range (40)]

(mu, cov, _, _) = ukf.batch_filter(zs, dts=dts)
(xs, Ps, Ks) = ukf.rts_smoother(mu, cov)
</code></pre></div>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.compute_process_sigmas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_process_sigmas</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">fx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fx_args</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.compute_process_sigmas" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>computes the values of sigmas_f. Normally a user would not call
this, but it is useful if you need to call update more than once
between calls to predict (to update for multiple simultaneous
measurements), so the sigmas correctly reflect the updated state
x, P.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.cross_variance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cross_variance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">sigmas_f</span><span class="p">,</span> <span class="n">sigmas_h</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.cross_variance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compute cross variance of the state <code>x</code> and measurement <code>z</code>.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.predict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="n">dt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">UT</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fx_args</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.predict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Performs the predict step of the UKF. On return, self.x and
self.P contain the predicted state (x) and covariance (P). '</p>
<p>Important: this MUST be called before update() is called for the first
time.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dt</code>
            </td>
            <td>
                  <code><span title="double">double</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If specified, the time step to be used for this prediction.
self._dt is used if this is not provided.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fx</code>
            </td>
            <td>
                  <code>callable f(x, dt, **fx_args)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State transition function. If not provided, the default
function passed in during construction will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>UT</code>
            </td>
            <td>
                  <code><span title="function">function</span>(<span title="sigmas">sigmas</span>, <span title="Wm">Wm</span>, <span title="Wc">Wc</span>, <span title="noise_cov">noise_cov</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional function to compute the unscented transform for the sigma
points passed through hx. Typically the default function will
work - you can use x_mean_fn and z_mean_fn to alter the behavior
of the unscented transform.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**fx_args</code>
            </td>
            <td>
                  <code>keyword arguments</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional keyword arguments to be passed into f(x).</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.rts_smoother" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rts_smoother</span><span class="p">(</span><span class="n">Xs</span><span class="p">,</span> <span class="n">Ps</span><span class="p">,</span> <span class="n">Qs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">UT</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.rts_smoother" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Runs the Rauch-Tung-Striebel Kalman smoother on a set of
means and covariances computed by the UKF. The usual input
would come from the output of <code>batch_filter()</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>Xs</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of the means (state variable x) of the output of a Kalman
filter.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Ps</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of the covariances of the output of a kalman filter.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Qs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Process noise of the Kalman filter at each time step. Optional,
if not provided the filter's self.Q will be used</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dt</code>
            </td>
            <td>
                  <code>optional, float or array-like of float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If provided, specifies the time step of each step of the filter.
If float, then the same time step is used for all steps. If
an array, then each element k contains the time  at step k.
Units are seconds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>UT</code>
            </td>
            <td>
                  <code><span title="function">function</span>(<span title="sigmas">sigmas</span>, <span title="Wm">Wm</span>, <span title="Wc">Wc</span>, <span title="noise_cov">noise_cov</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional function to compute the unscented transform for the sigma
points passed through hx. Typically the default function will
work - you can use x_mean_fn and z_mean_fn to alter the behavior
of the unscented transform.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>x</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>smoothed means</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>P</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>smoothed state covariances</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>K</code></td>            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>smoother gain at each step</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>.. code-block:: Python</p>
<div class="highlight"><pre><span></span><code>zs = [t + random.randn()*4 for t in range (40)]

(mu, cov, _, _) = kalman.batch_filter(zs)
(x, P, K) = rts_smoother(mu, cov, fk.F, fk.Q)
</code></pre></div>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.UnscentedKalmanFilter.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">UT</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">hx_args</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.UnscentedKalmanFilter.update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Update the UKF with the given measurements. On return,
self.x and self.P contain the new mean and covariance of the filter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code>numpy.array of shape (dim_z)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement vector</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>R</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span>((<span title="dim_z">dim_z</span>, <span title="dim_z">dim_z</span>))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement noise. If provided, overrides self.R for
this function call.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>UT</code>
            </td>
            <td>
                  <code><span title="function">function</span>(<span title="sigmas">sigmas</span>, <span title="Wm">Wm</span>, <span title="Wc">Wc</span>, <span title="noise_cov">noise_cov</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional function to compute the unscented transform for the sigma
points passed through hx. Typically the default function will
work - you can use x_mean_fn and z_mean_fn to alter the behavior
of the unscented transform.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hx</code>
            </td>
            <td>
                  <code>callable h(x, **hx_args)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement function. If not provided, the default
function passed in during construction will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**hx_args</code>
            </td>
            <td>
                  <code>keyword argument</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>arguments to be passed into h(x) after x -&gt; h(x, **hx_args)</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div><h2 id="ensemblekalmanfilter">EnsembleKalmanFilter<a class="headerlink" href="#ensemblekalmanfilter" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="bayesian_filters.kalman.EnsembleKalmanFilter" class="doc doc-heading">
            <code>EnsembleKalmanFilter</code>


<a href="#bayesian_filters.kalman.EnsembleKalmanFilter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>This implements the ensemble Kalman filter (EnKF). The EnKF uses
an ensemble of hundreds to thousands of state vectors that are randomly
sampled around the estimate, and adds perturbations at each update and
predict step. It is useful for extremely large systems such as found
in hydrophysics. As such, this class is admittedly a toy as it is far
too slow with large N.</p>
<p>There are many versions of this sort of this filter. This formulation is
due to Crassidis and Junkins [1]. It works with both linear and nonlinear
systems.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>x</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>state mean</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>P</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span>((<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>covariance of the state</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim_z</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of of measurement inputs. For example, if the sensor
provides you with position in (x,y), dim_z would be 2.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dt</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>time step in seconds</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>N</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of sigma points (ensembles). Must be greater than 1.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hx</code>
            </td>
            <td>
                  <code>function hx(x)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement function. May be linear or nonlinear - converts state
x into a measurement. Return must be an np.array of the same
dimensionality as the measurement vector.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fx</code>
            </td>
            <td>
                  <code>function fx(x, dt)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State transition function. May be linear or nonlinear. Projects
state x into the next time period. Returns the projected state x.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.x">x</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State estimate</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.P">P</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State covariance matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.x_prior">x_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state estimate. The <em>_prior and </em>_post attributes
are for convienence; they store the  prior and posterior of the
current epoch. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.P_prior">P_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.x_post">x_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state estimate. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.P_post">P_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.z">z</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last measurement used in update(). Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.R">R</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_z">dim_z</span>, <span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement noise matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.Q">Q</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Process noise matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.fx">fx</span></code></td>
            <td>
                  <code><span title="callable">callable</span>(<span title="x">x</span>, <span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dt">dt</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State transition function</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.hx">hx</span></code></td>
            <td>
                  <code><span title="callable">callable</span>(<span title="x">x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement function. Convert state <code>x</code> into a measurement</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.EnsembleKalmanFilter.inv">inv</span></code></td>
            <td>
                  <code>function, default numpy.linalg.inv</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If you prefer another inverse function, such as the Moore-Penrose
pseudo inverse, set it to that instead: kf.inv = np.linalg.pinv</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>.. code-block:: Python</p>
<div class="highlight"><pre><span></span><code>def hx(x):
   return np.array([x[0]])

F = np.array([[1., 1.],
              [0., 1.]])
def fx(x, dt):
    return np.dot(F, x)

x = np.array([0., 1.])
P = np.eye(2) * 100.
dt = 0.1
f = EnsembleKalmanFilter(x=x, P=P, dim_z=1, dt=dt,
                         N=8, hx=hx, fx=fx)

std_noise = 3.
f.R *= std_noise**2
f.Q = Q_discrete_white_noise(2, dt, .01)

while True:
    z = read_sensor()
    f.predict()
    f.update(np.asarray([z]))
</code></pre></div>
<p>See my book Kalman and Bayesian Filters in Python
https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python</p>


<details class="references" open>
  <summary>References</summary>
  <ul>
<li>[1] John L Crassidis and John L. Junkins. "Optimal Estimation of
  Dynamic Systems. CRC Press, second edition. 2012. pp, 257-9.</li>
</ul>
</details>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.EnsembleKalmanFilter.initialize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.EnsembleKalmanFilter.initialize" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initializes the filter with the specified mean and
covariance. Only need to call this if you are using the filter
to filter more than one set of data; this is called by <strong>init</strong></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>x</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>state mean</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>P</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span>((<span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.ensemble_kalman_filter.EnsembleKalmanFilter.dim_x">dim_x</span>))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>covariance of the state</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.EnsembleKalmanFilter.predict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict</span><span class="p">()</span></code>

<a href="#bayesian_filters.kalman.EnsembleKalmanFilter.predict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predict next position.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.EnsembleKalmanFilter.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.EnsembleKalmanFilter.update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a new measurement (z) to the kalman filter. If z is None, nothing
is changed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>R</code>
            </td>
            <td>
                  <code>np.array, scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide R to override the measurement noise for this
one call, otherwise self.R will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div><h2 id="informationfilter">InformationFilter<a class="headerlink" href="#informationfilter" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="bayesian_filters.kalman.InformationFilter" class="doc doc-heading">
            <code>InformationFilter</code>


<a href="#bayesian_filters.kalman.InformationFilter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>Create a linear Information filter. Information filters
compute the
inverse of the Kalman filter, allowing you to easily denote having
no information at initialization.</p>
<p>You are responsible for setting the various state variables to reasonable
values; the defaults below will not give you a functional filter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dim_x</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of state variables for the  filter. For example, if you
are tracking the position and velocity of an object in two
dimensions, dim_x would be 4.</p>
<p>This is used to set the default size of P, Q, and u</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim_z</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of of measurement inputs. For example, if the sensor
provides you with position in (x,y), dim_z would be 2.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim_u</code>
            </td>
            <td>
                  <code><span title="int">int</span>(<span title="optional">optional</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>size of the control input, if it is being used.
Default value of 0 indicates it is not used.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>self</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>self</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.x">x</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>State estimate vector</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.P_inv">P_inv</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>inverse state covariance matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.x_prior">x_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state estimate. The <em>_prior and </em>_post attributes
are for convienence; they store the  prior and posterior of the
current epoch. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.P_inv_prior">P_inv_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Inverse prior (predicted) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.x_post">x_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state estimate. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.P_inv_post">P_inv_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Inverse posterior (updated) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.z">z</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last measurement used in update(). Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.R_inv">R_inv</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_z">dim_z</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>inverse of measurement noise matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.Q">Q</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Process noise matrix</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.H">H</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_z">dim_z</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Measurement function</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.y">y</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Residual of the update step. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.K">K</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_z">dim_z</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Kalman gain of the update step. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.S">S</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Systen uncertaintly projected to measurement space. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.log_likelihood">log_likelihood</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>log-likelihood of the last measurement. Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.likelihood">likelihood</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>likelihood of last measurment. Read only.</p>
<p>Computed from the log-likelihood. The log-likelihood can be very
small,  meaning a large negative value such as -28000. Taking the
exp() of that results in 0.0, which can break typical algorithms
which multiply by this value, so by default we always return a
number &gt;= sys.float_info.min.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.InformationFilter.inv">inv</span></code></td>
            <td>
                  <code>function, default numpy.linalg.inv</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If you prefer another inverse function, such as the Moore-Penrose
pseudo inverse, set it to that instead: kf.inv = np.linalg.pinv</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>See my book Kalman and Bayesian Filters in Python
https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.InformationFilter.F" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">F</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

<a href="#bayesian_filters.kalman.InformationFilter.F" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>State Transition matrix</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="bayesian_filters.kalman.InformationFilter.P" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">P</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#bayesian_filters.kalman.InformationFilter.P" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>State covariance matrix</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.InformationFilter.batch_filter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">batch_filter</span><span class="p">(</span><span class="n">zs</span><span class="p">,</span> <span class="n">Rs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">update_first</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saver</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.InformationFilter.batch_filter" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Batch processes a sequences of measurements.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>zs</code>
            </td>
            <td>
                  <code><span title="list">list</span> - <span title="like">like</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of measurements at each time step <code>self.dt</code> Missing
measurements must be represented by 'None'.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>Rs</code>
            </td>
            <td>
                  <code><span title="list">list</span> - <span title="like">like</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional list of values to use for the measurement error
covariance; a value of None in any position will cause the filter
to use <code>self.R</code> for that time step.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update_first</code>
            </td>
            <td>
                  <code>(<span title="bool">bool</span>, <span title="optional">optional</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>controls whether the order of operations is update followed by
predict, or predict followed by update. Default is predict-&gt;update.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>saver</code>
            </td>
            <td>
                  <code><span title="filterpy.common.Saver">Saver</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>filterpy.common.Saver object. If provided, saver.save() will be
called after every epoch</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>means</code></td>            <td>
                  <code><span title="numpy.array">array</span>((<span title="n">n</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, 1))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of the state for each time step. Each entry is an np.array.
In other words <code>means[k,:]</code> is the state at step <code>k</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>covariance</code></td>            <td>
                  <code><span title="numpy.array">array</span>((<span title="n">n</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.information_filter.InformationFilter.dim_x">dim_x</span>))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>array of the covariances for each time step. In other words
<code>covariance[k,:,:]</code> is the covariance at step <code>k</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.InformationFilter.predict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.InformationFilter.predict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predict next position.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>u</code>
            </td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control vector. If non-zero, it is multiplied by B
to create the control input into the system.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.InformationFilter.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">R_inv</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.InformationFilter.update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a new measurement (z) to the kalman filter. If z is None, nothing
is changed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>R</code>
            </td>
            <td>
                  <code>np.array, scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide R to override the measurement noise for this
one call, otherwise  self.R will be used.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div><h2 id="immestimator">IMMEstimator<a class="headerlink" href="#immestimator" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="bayesian_filters.kalman.IMMEstimator" class="doc doc-heading">
            <code>IMMEstimator</code>


<a href="#bayesian_filters.kalman.IMMEstimator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>Implements an Interacting Multiple-Model (IMM) estimator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filters</code>
            </td>
            <td>
                  <code>(N,) array_like of KalmanFilter objects</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of N filters. filters[i] is the ith Kalman filter in the
IMM estimator.</p>
<p>Each filter must have the same dimension for the state <code>x</code> and <code>P</code>,
otherwise the states of each filter cannot be mixed with each other.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mu</code>
            </td>
            <td>
                  <code>(N,) array_like of float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>mode probability: mu[i] is the probability that
filter i is the correct one.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>M</code>
            </td>
            <td>
                  <code>(N, N) ndarray of float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Markov chain transition matrix. M[i,j] is the probability of
switching from filter j to filter i.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.x">x</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current state estimate. Any call to update() or predict() updates
this variable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.P">P</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, <span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current state covariance matrix. Any call to update() or predict()
updates this variable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.x_prior">x_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state estimate. The <em>_prior and </em>_post attributes
are for convienence; they store the  prior and posterior of the
current epoch. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.P_prior">P_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, <span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.x_post">x_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state estimate. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.P_post">P_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="dim_x">dim_x</span>, <span title="dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.N">N</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of filters in the filter bank</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.mu">mu</span></code></td>
            <td>
                  <code>(N,) ndarray of float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>mode probability: mu[i] is the probability that
filter i is the correct one.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.M">M</span></code></td>
            <td>
                  <code>(N, N) ndarray of float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Markov chain transition matrix. M[i,j] is the probability of
switching from filter j to filter i.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.cbar">cbar</span></code></td>
            <td>
                  <code>(N,) ndarray of float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total probability, after interaction, that the target is in state j.
We use it as the # normalization constant.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.likelihood">likelihood</span></code></td>
            <td>
                  <code>(N,) ndarray of float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Likelihood of each individual filter's last measurement.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.IMMEstimator.omega">omega</span></code></td>
            <td>
                  <code>(N, N) ndarray of float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mixing probabilitity - omega[i, j] is the probabilility of mixing
the state of filter i into filter j. Perhaps more understandably,
it weights the states of each filter by:
    x_j = sum(omega[i,j] * x_i)</p>
<p>with a similar weighting for P_j</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">bayesian_filters.common</span><span class="w"> </span><span class="kn">import</span> <span class="n">kinematic_kf</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">bayesian_filters.kalman</span><span class="w"> </span><span class="kn">import</span> <span class="n">IMMEstimator</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">kf1</span> <span class="o">=</span> <span class="n">kinematic_kf</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">kf2</span> <span class="o">=</span> <span class="n">kinematic_kf</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># do some settings of x, R, P etc. here, I&#39;ll just use the defaults</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">kf2</span><span class="o">.</span><span class="n">Q</span> <span class="o">*=</span> <span class="mi">0</span>   <span class="c1"># no prediction error in second filter</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">&gt;&gt;&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">kf1</span><span class="p">,</span> <span class="n">kf2</span><span class="p">]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">mu</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>  <span class="c1"># each filter is equally likely at the start</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.97</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">]])</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">imm</span> <span class="o">=</span> <span class="n">IMMEstimator</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">trans</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">&gt;&gt;&gt;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># make some noisy data</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">x</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">kf1</span><span class="o">.</span><span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">y</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">kf1</span><span class="o">.</span><span class="n">R</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">y</span><span class="p">]])</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="gp">&gt;&gt;&gt;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># perform predict/update cycle</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">imm</span><span class="o">.</span><span class="n">predict</span><span class="p">()</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="n">imm</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">imm</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</code></pre></div>
    <p>For a full explanation and more examples see my book
Kalman and Bayesian Filters in Python
https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python</p>


<details class="references" open>
  <summary>References</summary>
  <p>Bar-Shalom, Y., Li, X-R., and Kirubarajan, T. "Estimation with
Application to Tracking and Navigation". Wiley-Interscience, 2001.</p>
<p>Crassidis, J and Junkins, J. "Optimal Estimation of
Dynamic Systems". CRC Press, second edition. 2012.</p>
<p>Labbe, R. "Kalman and Bayesian Filters in Python".
https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python</p>
</details>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.IMMEstimator.predict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.IMMEstimator.predict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predict next state (prior) using the IMM state propagation
equations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>u</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Control vector. If not <code>None</code>, it is multiplied by B
to create the control input into the system.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.IMMEstimator.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.IMMEstimator.update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a new measurement (z) to the Kalman filter. If z is None, nothing
is changed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div><h2 id="mmaefilterbank">MMAEFilterBank<a class="headerlink" href="#mmaefilterbank" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="bayesian_filters.kalman.MMAEFilterBank" class="doc doc-heading">
            <code>MMAEFilterBank</code>


<a href="#bayesian_filters.kalman.MMAEFilterBank" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>Implements the fixed Multiple Model Adaptive Estimator (MMAE). This
is a bank of independent Kalman filters. This estimator computes the
likelihood that each filter is the correct one, and blends their state
estimates weighted by their likelihood to produce the state estimate.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filters</code>
            </td>
            <td>
                  <code>list of Kalman filters</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of Kalman filters.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>p</code>
            </td>
            <td>
                  <code>list-like of floats</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial probability that each filter is the correct one. In general
you'd probably set each element to 1./len(p).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim_x</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of random variables in the state X</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>H</code>
            </td>
            <td>
                  <code>Measurement matrix</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.MMAEFilterBank.x">x</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current state estimate. Any call to update() or predict() updates
this variable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.MMAEFilterBank.P">P</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current state covariance matrix. Any call to update() or predict()
updates this variable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.MMAEFilterBank.x_prior">x_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state estimate. The <em>_prior and </em>_post attributes
are for convienence; they store the  prior and posterior of the
current epoch. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.MMAEFilterBank.P_prior">P_prior</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prior (predicted) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.MMAEFilterBank.x_post">x_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>, 1)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state estimate. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.MMAEFilterBank.P_post">P_post</span></code></td>
            <td>
                  <code><span title="numpy.array">array</span>(<span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>, <span title="bayesian_filters.kalman.mmae.MMAEFilterBank.dim_x">dim_x</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Posterior (updated) state covariance matrix. Read Only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.MMAEFilterBank.z">z</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Last measurement used in update(). Read only.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="bayesian_filters.kalman.MMAEFilterBank.filters">filters</span></code></td>
            <td>
                  <code>list of Kalman filters</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of Kalman filters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>..code:
    ca = make_ca_filter(dt, noise_factor=0.6)
    cv = make_ca_filter(dt, noise_factor=0.6)
    cv.F[:,2] = 0 # remove acceleration term
    cv.P[2,2] = 0
    cv.Q[2,2] = 0</p>
<div class="highlight"><pre><span></span><code>filters = [cv, ca]
bank = MMAEFilterBank(filters, p=(0.5, 0.5), dim_x=3)

for z in zs:
    bank.predict()
    bank.update(z)
</code></pre></div>
<p>Also, see my book Kalman and Bayesian Filters in Python
https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python</p>


<details class="references" open>
  <summary>References</summary>
  <p>Zarchan and Musoff. "Fundamentals of Kalman filtering: A Practical
Approach." AIAA, third edition.</p>
</details>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.MMAEFilterBank.predict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.MMAEFilterBank.predict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Predict next position using the Kalman filter state propagation
equations for each filter in the bank.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>u</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional control vector. If non-zero, it is multiplied by B
to create the control input into the system.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="bayesian_filters.kalman.MMAEFilterBank.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">H</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#bayesian_filters.kalman.MMAEFilterBank.update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a new measurement (z) to the Kalman filter. If z is None, nothing
is changed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>z</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>measurement for this update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>R</code>
            </td>
            <td>
                  <code>np.array, scalar, or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide R to override the measurement noise for this
one call, otherwise  self.R will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>H</code>
            </td>
            <td>
                  <code>np.array,  or None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally provide H to override the measurement function for this
one call, otherwise  self.H will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014-2025 Roger R. Labbe
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/GeorgePearse/filterpy" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/bayesian-filters/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>